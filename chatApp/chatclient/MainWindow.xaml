<Window x:Class="ChatClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Онлайн чат"
        Height="560"
        Width="980">

    <Grid Margin="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ===================== CONTACTS ===================== -->
        <Border Grid.Column="0"
                Style="{StaticResource CardBorderStyle}"
                Margin="0,0,12,0">
            <DockPanel>

                <StackPanel DockPanel.Dock="Top" Margin="0,0,0,12">
                    <TextBlock Text="Контакты"
                               Style="{StaticResource SectionTitleText}"
                               FontSize="15"/>

                    <Grid Margin="0,6,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="SearchContactTextBox"
                                 Grid.Column="0"
                                 Height="30"
                                 Padding="6,3"
                                 Margin="0,0,8,0"/>

                        <Button Content="Найти"
                                Grid.Column="1"
                                Width="78"
                                Height="30"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Click="FindContactButton_Click"/>
                    </Grid>
                </StackPanel>

                <ListBox x:Name="ContactsListBox"
                         SelectionChanged="ContactsListBox_SelectionChanged">

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="48"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Width="40" Height="40">
                                    <Ellipse Width="40" Height="40">
                                        <Ellipse.Fill>
                                            <ImageBrush ImageSource="{Binding AvatarPath}"
                                                        Stretch="UniformToFill"/>
                                        </Ellipse.Fill>
                                    </Ellipse>

                                    <Ellipse Width="10"
                                             Height="10"
                                             Fill="{Binding StatusColor}"
                                             Stroke="White"
                                             StrokeThickness="1.5"
                                             HorizontalAlignment="Right"
                                             VerticalAlignment="Bottom"
                                             Margin="0,0,1,1"/>
                                </Grid>

                                <StackPanel Grid.Column="1"
                                            Margin="10,0,0,0"
                                            VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Name}"
                                               FontWeight="SemiBold"
                                               FontSize="13"/>
                                    <TextBlock Text="{Binding StatusText}"
                                               Foreground="{StaticResource BrushTextSecondary}"
                                               FontSize="11"/>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>

                </ListBox>
            </DockPanel>
        </Border>

        <!-- ===================== CHAT ===================== -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- ===================== HEADER ===================== -->
            <Border Grid.Row="0"
                    Style="{StaticResource CardBorderStyle}"
                    Padding="14"
                    Margin="0,0,0,12">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- LEFT SIDE -->
                    <StackPanel Grid.Column="0"
                                Orientation="Horizontal"
                                VerticalAlignment="Center">

                        <TextBlock Text="Имя"
                                   Style="{StaticResource FormLabelText}"
                                   FontSize="12"
                                   Margin="0,0,6,0"/>

                        <TextBox x:Name="UserNameTextBox"
                                 Width="180"
                                 Height="30"
                                 Padding="6,3"
                                 Margin="0,0,20,0"/>

                        <TextBlock Text="Статус"
                                   Style="{StaticResource FormLabelText}"
                                   FontSize="12"
                                   Margin="0,0,6,0"/>

                        <TextBlock x:Name="ConnectionStatusTextBlock"
                                   FontSize="12"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource BrushTextSecondary}"/>
                    </StackPanel>

                    <!-- RIGHT TOP CORNER -->
                    <StackPanel Grid.Column="1"
                                Orientation="Horizontal"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center">

                        <Button Content="Профиль"
                                Width="100"
                                Height="32"
                                Margin="0,0,8,0"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Click="ProfileButton_Click"/>

                        <Button Content="Выйти"
                                Width="90"
                                Height="32"
                                Click="LogoutButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ===================== MESSAGES ===================== -->
            <Border Grid.Row="1"
                    Style="{StaticResource CardBorderStyle}"
                    Padding="10">
                <ListBox x:Name="MessagesListBox"/>
            </Border>

            <!-- ===================== INPUT ===================== -->
            <Border Grid.Row="2"
                    Style="{StaticResource CardBorderStyle}"
                    Padding="12"
                    Margin="0,12,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBox x:Name="MessageTextBox"
                             Grid.Column="0"
                             Height="36"
                             Padding="8,4"
                             Margin="0,0,10,0"
                             VerticalAlignment="Center"
                             KeyDown="MessageTextBox_KeyDown"/>

                    <!-- ATTACH (WHATSAPP STYLE) -->
                    <Button x:Name="AttachButton"
                            Grid.Column="1"
                            Width="40"
                            Height="36"
                            Margin="0,0,10,0"
                            VerticalAlignment="Center"
                            Style="{StaticResource SecondaryButtonStyle}"
                            Click="AttachButton_Click">
                        <Viewbox Width="18" Height="18">
                            <Path Fill="{StaticResource BrushTextSecondary}"
                                  Data="M6.5,2
                                        C4.57,2 3,3.57 3,5.5
                                        V14.5
                                        C3,16.43 4.57,18 6.5,18
                                        C8.43,18 10,16.43 10,14.5
                                        V6
                                        C10,4.9 9.1,4 8,4
                                        C6.9,4 6,4.9 6,6
                                        V13.5
                                        C6,14.33 6.67,15 7.5,15
                                        C8.33,15 9,14.33 9,13.5
                                        V6.5
                                        H7.5
                                        V13.5
                                        C7.5,13.78 7.28,14 7,14
                                        C6.72,14 6.5,13.78 6.5,13.5
                                        V6
                                        C6.5,5.45 6.95,5 7.5,5
                                        C8.05,5 8.5,5.45 8.5,6
                                        V14.5
                                        C8.5,15.88 7.38,17 6,17
                                        C4.62,17 3.5,15.88 3.5,14.5
                                        V5.5
                                        C3.5,3.85 4.85,2.5 6.5,2 Z"/>
                        </Viewbox>
                    </Button>

                    <Button x:Name="SendButton"
                            Grid.Column="2"
                            Content="Отправить"
                            Width="120"
                            Height="36"
                            VerticalAlignment="Center"
                            Click="SendButton_Click"/>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
